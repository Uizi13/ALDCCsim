<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ALDCC simulator: ALDCC Simulator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen-custom.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ALDCC simulator<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">A program for analysis of linear direct current circuits.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ALDCC Simulator </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_docs_2doxygen__readme"></a></p>
<p>ALDCCsim is a C++ command-line tool designed to solve linear electrical circuits using Modified Nodal Analysis (MNA). The solver supports resistors, independent voltage sources, and independent current sources. It also features a bisection-based optimization engine to find specific component values required to achieve a desired circuit output (voltage, current, or power).</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1"></a>
Below is a shorter description of the program made for users. The original task description, analysis of the problem as well as internal specification and testing can be found in:</h2>
<div class="my_center"> <div class="my_fragment"> docs/detailed_description.md </div> </div><h1 class="doxsection"><a class="anchor" id="autotoc_md2"></a>
Features</h1>
<ol type="1">
<li><b>Modified Nodal Analysis (MNA)</b>: Handles both voltage and current sources by expanding the nodal matrix.</li>
<li><b>Bisection Engine</b>: Automatically determines the required value of a "variable" component to meet a target output.</li>
<li><b>Robust Linear Solver</b>: Uses Gaussian elimination with partial pivoting for numerical stability.</li>
<li><b>Error Detection</b>: Identifies invalid circuit topologies, such as parallel voltage sources or indeterminate nodes.</li>
<li><b>Customizable Precision</b>: Configurable output precision for scientific and engineering requirements.</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md3"></a>
Usage</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md4"></a>
Command Line Arguments</h2>
<div class="fragment"><div class="line">./ALDCCsim -i &lt;input_file&gt; -o &lt;output_file&gt; -p &lt;precision&gt;</div>
</div><!-- fragment --><p> <span class="tt">-i</span>: Path to the input circuit file. <br  />
 <span class="tt">-o</span>: Path where results will be saved. <br  />
 <span class="tt">-p</span>: (optional) Number of decimal places for rounding (default: 4).</p>
<p>The program has two modes of operation that are determined by the program internally based on contents of the input file: </p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md5"></a>
Basic mode</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
Input</h3>
<p>Each line of the input file should contain one <a class="el" href="struct_element.html" title="Element">element</a> along with nodes to which it is connected and a value. </p><div class="fragment"><div class="line">&lt;Type&gt; &lt;Node1&gt; &lt;Node2&gt; &lt;Value&gt;</div>
</div><!-- fragment --><p> A node is every tree of wires separated from other nodes with elements. Nodes should be numbered arbitrarily starting from 1. </p><blockquote class="doxtable">
<p>Note: A value is assumed to be given in SI units and its unit corresponds to the given element type.<br  />
 Example: <span class="tt">E 1 2 4</span> stands for <span class="tt">voltage source directed from node 1 to node 2 with value 4</span> </p>
</blockquote>
<blockquote class="doxtable">
<p>Note: The order of nodes is important for specifying in which direction sources are placed. They are directed from the first node towards the second. This order is also important in how results are presented. (see sign convention) </p>
</blockquote>
<p><a class="el" href="element_8hpp.html#a16b11be27a8e9362dd122c4d879e01ae" title="ElementType">Element types</a>:</p><ul>
<li><b>E</b> denotes a voltage source</li>
<li><b>J</b> denotes a current source</li>
<li><b>R</b> denotes a resistor</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md7"></a>
Example Input</h3>
<p><img src="docs/images/example1.jpg" alt="" class="inline"/> </p><div class="fragment"><div class="line">E 1 2 4</div>
<div class="line">R 2 3 16</div>
<div class="line">R 1 3 16</div>
<div class="line">R 3 4 8</div>
<div class="line">R 1 4 8</div>
<div class="line">J 1 4 6</div>
</div><!-- fragment --> <h1 class="doxsection"><a class="anchor" id="autotoc_md8"></a>
<blockquote class="doxtable">
<p>Note: Because we marked the ground node on the left as node <span class="tt">1</span>, we can do the same on the right - they are effectively the same node.</p>
</blockquote>
</h1>
<p><img src="docs/images/example2.jpg" alt="" class="inline"/> </p><div class="fragment"><div class="line">R 2 1 4</div>
<div class="line">E 3 2 20</div>
<div class="line">R 3 1 12</div>
<div class="line">R 1 4 4</div>
<div class="line">E 1 6 0</div>
<div class="line">R 3 6 2</div>
<div class="line">R 6 4 4</div>
<div class="line">R 5 4 8</div>
<div class="line">J 5 6 3</div>
</div><!-- fragment --><p> Note: In this circuit we can model an ideal ammeter using a <span class="tt">0V</span> voltage source. </p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
Search Mode (Bisection)</h2>
<p>The simulator enters <b>Search Mode</b> when it detects a variable element and a target output value in the input file. This mode utilizes a bisection-based optimization engine to find the specific component value required to achieve a desired circuit state.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md10"></a>
Input</h3>
<p>To use the simulator in this mode, one element must have its value replaced with an <span class="tt">x</span> symbol, and a target condition must be specified. The rest of the input file format is unchanged between basic mode and search mode.</p>
<p>Variable element (exactly one should be present): </p><div class="fragment"><div class="line">&lt;Type&gt; &lt;Node1&gt; &lt;Node2&gt; x</div>
</div><!-- fragment --><p>Target condition (can be specified alongside any element to which it should apply) (exactly one should be present): </p><div class="fragment"><div class="line">&lt;ValueType&gt; &lt;DesiredValue&gt;</div>
</div><!-- fragment --><ul>
<li><b>Variable Element</b>: Only one element in the circuit can be marked as variable using <span class="tt">x</span>.</li>
<li><b>Value Type</b>: Voltage <span class="tt">U</span>, Current <span class="tt">I</span>, or Power <span class="tt">P</span>.</li>
<li><b>Desired Value</b>: Value of voltage, current or power that the simulator will try to reach on this element (do <b>not</b> place units - SI units are assumed).</li>
<li><b>Voltage (<span class="tt">U</span>)</b>: Target voltage across an element.</li>
<li><b>Current (<span class="tt">I</span>)</b>: Target current through an element.</li>
<li><b>Power (<span class="tt">P</span>)</b>: Target power dissipated/supplied(depending on the sign) by an element.</li>
</ul>
<blockquote class="doxtable">
<p>Example: <span class="tt">E 1 2 30 P 10</span>. First 4 values specify the element (see input) and 'P 10' define how much power is supposed to be supplied/absorbed (see sign convention) by this element. </p>
</blockquote>
<blockquote class="doxtable">
<p>Note: Variable element and the element with desired value specified can be the same element (see the third example below) </p>
</blockquote>
<h3 class="doxsection"><a class="anchor" id="autotoc_md11"></a>
Example Bisection Input</h3>
<p><img src="docs/images/example3.jpg" alt="" class="inline"/> </p><div class="fragment"><div class="line">E 1 2 10</div>
<div class="line">R 2 3 x</div>
<div class="line">R 3 1 50 U 5</div>
</div><!-- fragment --><p> In this example, the simulator will find the resistance of the resistor between nodes 3 and 1 that results in exactly 5V voltage across nodes 3 and 1.</p>
<hr  />
<p> <img src="docs/images/example4.jpg" alt="" class="inline"/> </p><div class="fragment"><div class="line">E 5 1 x</div>
<div class="line">R 1 2 3.8</div>
<div class="line">R 2 3 3.8</div>
<div class="line">J 4 2 1.2</div>
<div class="line">R 5 4 3.8</div>
<div class="line">E 5 3 18.5 P 4.9</div>
</div><!-- fragment --><p> The simulator will find the value of the voltage source between nodes 5 and 1 that results in 4.9W of power being supplied by the other voltage source (between nodes 5 and 3).</p>
<hr  />
<p> <img src="docs/images/example5.jpg" alt="" class="inline"/> </p><div class="fragment"><div class="line">J 3 1 x P 5.5</div>
<div class="line">R 1 2 1</div>
<div class="line">R 2 3 5</div>
<div class="line">R 2 3 20</div>
</div><!-- fragment --><p> The simulator will find the value of the current source between nodes 3 and 1 that results in 5.5W of power being supplied by it.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
Output</h2>
<p>The simulation results are written to the specified output file with the following sections:</p>
<ol type="1">
<li><b>Bisection Result</b>: If bisection was performed, the final calculated value for the variable element is displayed.</li>
<li><b>Element Table</b>: A formatted table showing Voltage <span class="tt">U</span>, Current <span class="tt">I</span>, and Power <span class="tt">P</span> for every component.</li>
<li><b>Node Potentials</b>: A list of the calculated potentials <span class="tt">V</span> for every node in the circuit (with node 1 always chosen as ground node).</li>
</ol>
<p>Values are rounded according to the specified precision (default: 4).</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Sign Convention</h3>
<p>Values given in the <b>Element Table</b> are given in accordance to <b>passive sign convention</b> for <b>resistors</b> and <b>active sign convention</b> for <b>sources</b>. Each element's current is positive if it flows in the direction from the first node to the second.</p>
<blockquote class="doxtable">
<p>Example: If an element is described in the input file in the following way: <span class="tt">R 4 3 1.5</span>, the simulator will output its curent as <b>positive</b> if it flows <b>from node <span class="tt">4</span> to node <span class="tt">3</span></b>. </p>
</blockquote>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Implementation Details</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
1. Modified Nodal Analysis (MNA)</h3>
<p>The solver constructs an augmented matrix <span class="tt">Ax = b</span>, where:</p><ul>
<li><span class="tt">A</span> contains coefficients representing conductance values and voltage stamps.</li>
<li><span class="tt">x</span> is the vector of unknown node potentials and voltage source currents.</li>
<li><span class="tt">b</span> contains known source values.</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
2. Equation Solver</h3>
<p>Gaussian elimination is performed on the matrix equation in order to solve for potentials and voltage source currents.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
3. Bisection Algorithm</h3>
<p>The optimization process follows these steps:</p>
<ol type="1">
<li><b>Derivative Sign Detection</b>: The simulator perturbs the variable element by a small value to determine if the output increases or decreases.</li>
<li><b>Bound Finding</b>: It iteratively doubles the search range until the desired value is bracketed.</li>
<li><b>Iteration</b>: The solver performs 50 iterations (<a class="el" href="namespaceconstants.html#abef9e7ac24ec4aedc071976c20c68b2b" title="constants::BISECTION_PREC">BISECTION_PREC</a>) to converge on the final component value with high precision.</li>
</ol>
<h3 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
4. Error Handling and Validation</h3>
<p>The program performs several topological checks before solving:</p>
<ul>
<li><b>Current Source Only Nodes</b>: Detects nodes connected only to current sources, which makes voltage indeterminate.</li>
<li><b>Parallel Voltage Sources</b>: Identifies illegal parallel voltage source configurations that would lead to indeterminate branch currents.</li>
<li><b>Contradictory Equations</b>: Throws an error during Gaussian elimination if the circuit description leads to an unsolvable system. </li>
</ul>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
